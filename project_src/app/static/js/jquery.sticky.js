(function(e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)})(function(e){var p=Array.prototype.slice,s=Array.prototype.splice,m={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",widthFromWrapper:!0,responsiveWidth:!1,zIndex:"9999"},n=e(window),t=e(document),k=[],q=n.height(),h=function(){for(var b=n.scrollTop(),g=t.height(),d=g-q,d=b>d?
d-b:0,j=0,c=k.length;j<c;j++){var a=k[j],f=a.stickyWrapper.offset().top-a.topSpacing-d;a.stickyWrapper.css("height",a.stickyElement.outerHeight());if(b<=f)null!==a.currentTop&&(a.stickyElement.css({width:"",position:"",top:"","z-index":""}),a.stickyElement.parent().removeClass(a.className),a.stickyElement.trigger("sticky-end",[a]),a.currentTop=null);else{f=g-a.stickyElement.outerHeight()-a.topSpacing-a.bottomSpacing-b-d;f=0>f?f+a.topSpacing:a.topSpacing;if(a.currentTop!==f){var l;a.getWidthFrom?(padding=
a.stickyElement.innerWidth()-a.stickyElement.width(),l=e(a.getWidthFrom).width()-padding||null):a.widthFromWrapper&&(l=a.stickyWrapper.width());null==l&&(l=a.stickyElement.width());a.stickyElement.css("width",l).css("position","fixed").css("top",f).css("z-index",a.zIndex);a.stickyElement.parent().addClass(a.className);null===a.currentTop?a.stickyElement.trigger("sticky-start",[a]):a.stickyElement.trigger("sticky-update",[a]);a.currentTop===a.topSpacing&&a.currentTop>f||null===a.currentTop&&f<a.topSpacing?
a.stickyElement.trigger("sticky-bottom-reached",[a]):null!==a.currentTop&&(f===a.topSpacing&&a.currentTop<f)&&a.stickyElement.trigger("sticky-bottom-unreached",[a]);a.currentTop=f}var h=a.stickyWrapper.parent();a.stickyElement.offset().top+a.stickyElement.outerHeight()>=h.offset().top+h.outerHeight()&&a.stickyElement.offset().top<=a.topSpacing?a.stickyElement.css("position","absolute").css("top","").css("bottom",0).css("z-index",""):a.stickyElement.css("position","fixed").css("top",f).css("bottom",
"").css("z-index",a.zIndex)}}},r=function(){q=n.height();for(var b=0,g=k.length;b<g;b++){var d=k[b],c=null;d.getWidthFrom?d.responsiveWidth&&(c=e(d.getWidthFrom).width()):d.widthFromWrapper&&(c=d.stickyWrapper.width());null!=c&&d.stickyElement.css("width",c)}},c={init:function(b){return this.each(function(){var g=e.extend({},m,b),d=e(this),j=d.attr("id"),h=j?j+"-"+m.wrapperClassName:m.wrapperClassName,a=e("<div></div>").attr("id",h).addClass(g.wrapperClassName);d.wrapAll(function(){if(0==e(this).parent("#"+
h).length)return a});j=d.parent();g.center&&j.css({width:d.outerWidth(),marginLeft:"auto",marginRight:"auto"});"right"===d.css("float")&&d.css({"float":"none"}).parent().css({"float":"right"});g.stickyElement=d;g.stickyWrapper=j;g.currentTop=null;k.push(g);c.setWrapperHeight(this);c.setupChangeListeners(this)})},setWrapperHeight:function(b){b=e(b);var c=b.parent();c&&c.css("height",b.outerHeight())},setupChangeListeners:function(b){window.MutationObserver?(new window.MutationObserver(function(e){(e[0].addedNodes.length||
e[0].removedNodes.length)&&c.setWrapperHeight(b)})).observe(b,{subtree:!0,childList:!0}):window.addEventListener?(b.addEventListener("DOMNodeInserted",function(){c.setWrapperHeight(b)},!1),b.addEventListener("DOMNodeRemoved",function(){c.setWrapperHeight(b)},!1)):window.attachEvent&&(b.attachEvent("onDOMNodeInserted",function(){c.setWrapperHeight(b)}),b.attachEvent("onDOMNodeRemoved",function(){c.setWrapperHeight(b)}))},update:h,unstick:function(){return this.each(function(){for(var b=e(this),c=-1,
d=k.length;0<d--;)k[d].stickyElement.get(0)===this&&(s.call(k,d,1),c=d);-1!==c&&(b.unwrap(),b.css({width:"",position:"",top:"","float":"","z-index":""}))})}};window.addEventListener?(window.addEventListener("scroll",h,!1),window.addEventListener("resize",r,!1)):window.attachEvent&&(window.attachEvent("onscroll",h),window.attachEvent("onresize",r));e.fn.sticky=function(b){if(c[b])return c[b].apply(this,p.call(arguments,1));if("object"===typeof b||!b)return c.init.apply(this,arguments);e.error("Method "+
b+" does not exist on jQuery.sticky")};e.fn.unstick=function(b){if(c[b])return c[b].apply(this,p.call(arguments,1));if("object"===typeof b||!b)return c.unstick.apply(this,arguments);e.error("Method "+b+" does not exist on jQuery.sticky")};e(function(){setTimeout(h,0)})});
